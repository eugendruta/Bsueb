'use strict';$(document).ready(function(){function l(a){if(null===$("#"+a).val()){var c="http://localhost:8080/WebRWinMvn/Listbox?typ\x3d";for(let b=0;b<config.default.data.listboxen.length;b++)config.default.data.listboxen[b].name===a&&(c+=config.default.data.listboxen[b].typ+"\x26table\x3d"+config.default.data.listboxen[b].table,config.default.data.listboxen[b].constkey&&(c+="\x26constkey\x3d"+config.default.data.listboxen[b].constkey),UTIL.logger(dialogname+": initLb(): lbname: "+a+"; url: "+c),
$.getJSON(c,function(b){$("#"+a).append($("\x3coption\x3e\x3c/option\x3e").val("0").html("Alle"));$.each(b,function(b,c){$("#"+a).append($("\x3coption\x3e\x3c/option\x3e").val(c.id).html(c.name))})}),$("#"+a).show())}}dialogname="bsueb";servername=location.hostname+":8080";UTIL.logger("Servername: "+servername);var k=!1;$(window).on("beforeunload",function(){UTIL.logger(dialogname+": beforeunload(): closed: "+k);if(!k)return localStorage.setItem(dialogname,"closed"),localStorage.setItem(dialogname+
".width",$(window).width()),localStorage.setItem(dialogname+".height",$(window).height()),UTIL.logger(dialogname+": beforeunload(): Dialog: "+dialogname+": "+localStorage.getItem(dialogname)),!0;localStorage.removeItem(dialogname)});window.addEventListener("storage",function(a){var c=a.key,b=a.newValue;a=a.oldValue;var d=localStorage.getItem(c);UTIL.logger(dialogname+": onStorageEvent(): eintrag f\u00fcr key: "+c+"; oldvalue: "+a+"; newvalue: "+b+"; eintrag: "+d);k=!1;dialogname===c&&("closed"===
b?(k=!0,localStorage.removeItem(c),window.close(),UTIL.logger(dialogname+": onStorageEvent(): Dialog: "+c+" gel\u00f6scht und closed")):"folge"===b&&(aktdialog=c,UTIL.logger(dialogname+": onStorageEvent(): folgedialog: "+c),c=localStorage.getItem(aktdialog+".width"),c-=c/120,b=localStorage.getItem(aktdialog+".height"),UTIL.logger(dialogname+": onStorageEvent(): aktdialog: "+aktdialog+";_width: "+c+"; _height: "+(b-b/120)),c=window.open("../"+aktdialog+"/"+aktdialog+".html","_blank"),UTIL.logger(dialogname+
": onStorageEvent: dialog: "+c.name+" gestartet"),localStorage.setItem(aktdialog,"focus"),UTIL.logger(dialogname+": onStorageEvent: aktdialog: "+aktdialog+" auf focus gesetzt")))},!1);navinit();naviclick(dialogname);$("#navigatortbl").hide();$("#aktivewindows").hide();var e,f,h;UTIL.logger(dialogname+": ready(): localStorage.length: "+localStorage.length);for(let a=0;a<localStorage.length;a++){let c=localStorage.key(a),b=localStorage.getItem(c);UTIL.logger(dialogname+": ready(): localStorage: key: "+
c+"; value: "+b)}localStorage.getItem("browser");null===localStorage.getItem("starttime")&&(alert("Dialogsystem nicht aktiv !!  Bitte anmelden "),window.open("http://"+servername+"/webrwinnaviweb/webrw/webrw.html","_self"));customize=function(a){if("param"===a)$("#custom").dialog("open");else if("custfelder"===a){a=localStorage.getItem(dialogname+".eingabe");var c=JSON.parse(a);if(c)for(a=0;a<c.length;a++){let d=c[a].name,g=c[a].eingabe;var b="false"===c[a].visible?"none":"";$("#"+d+"lbl").css("display",
b);$("#"+d).css("display",b);g&&$("#"+d).val(g)}a=localStorage.getItem(dialogname+".ausgabe");if(c=JSON.parse(a))for(a=0;a<c.length;a++)b=c[a].visible,config.default.data.table1.columns[a].name===c[a].name&&(config.default.data.table1.columns[a].visible=b)}};customize("custfelder");$(document).bind("keydown",function(a){f=a.which;h=a.ctrlKey;if(17===f||17===f&&h)return console.log("ctrl blocked"),!1;if(38===f&&e){var c=e.rows(".selected").indexes()[0];a=config.default.data.table1.pageLength;c=c%a-
1;0>c&&(c=a-1);e.row(":eq("+c+")",{page:"current"}).select();return!1}if(40===f)return c=e.rows(".selected").indexes()[0],a=config.default.data.table1.pageLength,c=c%a+1,c>a-1&&(c=0),e.row(":eq("+c+")",{page:"current"}).select(),!1;if(115===f&&h)return console.log("ctrl+F4 blocked"),!1;if(115===f)return console.log("F4 blocked"),!1;if(116===f&&!h)return console.log("F5 blocked"),!1;if(116===f&&h)return console.log("F5/Ctrl+F5 blocked"),!1;if(82===f&&h)return console.log("ctrl+r blocked"),!1;if(9===
f&&a.ctrl)return console.log("ctrl+TAB blocked"),!1});$(window).on("click",function(a){"navmini"===a.target.id&&(a=a.target.value,UTIL.logger(dialogname+": window.click(): Button value: "+a),"\x3c"===a?($("#navigator").hide(),$("#navmini").val("\x3e")):"\x3e"===a?($("#navigator").show(),$("#navmini").val("\x3c")):alert("Navigatoreintrag falsch"));null===localStorage.getItem(dialogname)&&(localStorage.setItem(dialogname,"focus"),UTIL.logger(dialogname+": onclick() Dialog: "+dialogname+" im localStorage eingetragen"))});
$("#custom").dialog({title:"Customize",autoOpen:!1,width:600,height:420,modal:!0,closeText:""});changelb=function(a,c){for(var b=0;b<config.default.data.listboxen.length;b++)if(config.default.data.listboxen[b].name===a){dependend=config.default.data.listboxen[b].dependend;a="http://localhost:8080/WebRWinMvn/Listbox?typ\x3d";for(b=0;b<config.default.data.listboxen.length;b++)if(config.default.data.listboxen[b].name===dependend){a=0!=c?a+(config.default.data.listboxen[b].typ+"\x26table\x3d"+config.default.data.listboxen[b].table+
"\x26constkey\x3d"+config.default.data.listboxen[b].constkey+"\x26constkeyval\x3d"+c):a+(config.default.data.listboxen[b].typ+"\x26table\x3d"+config.default.data.listboxen[b].table);$.getJSON(a,function(a){$("#"+dependend).empty().append($("\x3coption\x3e\x3c/option\x3e").val("0").html("Alle"));$.each(a,function(a,b){$("#"+dependend).append($("\x3coption\x3e\x3c/option\x3e").val(b.id).html(b.name))})});break}break}};(function(){$("#eingabediv1 select").each(function(a){a=$(this).attr("id");void 0!==
a&&l(a)})})();rowclickaction=function(a,c,b){UTIL.logger(dialogname+": rowClickAction(): action: "+a+"/"+(!0===c?"doubleclick":"singleclick")+"; LE-Nr.: "+b[5]);"select"===a&&c||"select"!==a||c||($("#detail").attr("disabled",!1),$("#detail").css("background-color","white"),$("#lenrdet").val(b[5]),$("#lhmtypdet").val(b[33]),$("#mandantdet").val(b[0]),$("#herstellerdet").val(b[1]),$("#teilenrdet").val(b[2]),$("#hteilenrdet").val(b[3]),$("#bezeichnungdet").val(b[4]),$("#lotypdet").val(b[29]),$("#lagerortdet").val(b[38]),
$("#zoneaktuelldet").val(b[31]),$("#zoneavisiertdet").val(b[35]),$("#total").val(b[10]),$("#verfuegbar").val(b[11]),$("#reserviert").val(b[12]),$("#gesperrt").val(b[13]),$("#nachgefragt").val(b[43]),$("#geplant").val(b[44]),$("#laeuft").val(b[45]),$("#einheit").val(b[46]),$("#dispostatusdet").val(b[16]),$("#qsstatusdet").val(b[17]),$("#intsperredet").val(b[15]),$("#transportdet").prop("checked",1===b[14]?!0:!1),$("#inventurdet").prop("checked",1===b[8]?!0:!1),$("#retouredet").prop("checked",1===b[46]?
!0:!1),$("#fifodatumdet").val(UTIL.datum2String(b[53])),$("#bildungdatumdet").val(b[54]),$("#inventurdatumdet").val(UTIL.datum2String(b[56])))};showtable=function(a){var c=0,b=!1;UTIL.logger(dialogname+": showtable(tabelle): "+a+"; anzcolumns: "+config.default.data[a].anzcolumns);var d="SELECT ";for(var g=0;g<config.default.data[a].anzcolumns;g++)d+=config.default.data[a].columns[g].name+",";d=d.substring(0,d.length-1)+" FROM "+config.default.data[a].view;klausel=" WHERE ";$("#eingabediv1 input").each(function(a){var b=
$(this).attr("id");if(void 0!==b&&(a=$(this).val(),"0"!==a))for(let c=0;c<config.default.data.inputfelder.length;c++)if(config.default.data.inputfelder[c].name===b){b=config.default.data.inputfelder[c].dbcolumn;null!==a&&"0"!==a&&0!==a&&""!==a&&(klausel+=b+"\x3d'"+a+"' AND ",config.default.data.inputfelder[c].eingabe=a);break}});localStorage.setItem(dialogname+".eingabe",JSON.stringify(config.default.data.inputfelder));$("#eingabediv1 select").each(function(a){var b=$(this).attr("id");if(void 0!==
b&&(a=$(this).val(),"0"!==a))for(let c=0;c<config.default.data.listboxen.length;c++)if(config.default.data.listboxen[c].name===b){b=config.default.data.listboxen[c].dbcolumn;null!==a&&"0"!==a&&0!==a&&""!==a&&"none"!=config.default.data.listboxen[c].displed&&(klausel+=b+"\x3d'"+a+"' AND ");break}});" WHERE "!==klausel&&(d+=klausel,d=d.substr(0,d.length-5));d="http://localhost:8080/WebRWinMvn/"+config.default.data[a].servlet+"sqlstm\x3d"+d;g=config.default.data[a].name;$.fn.DataTable.isDataTable("#"+
g)?(UTIL.logger(dialogname+": showTable(): load"),e=$("#"+g).DataTable(),e.ajax.url(d).load(),e.pageLength=7):(UTIL.logger(dialogname+": showTable(): init; tabelle: "+a),e=$("#"+g).DataTable({ajax:d,autoWidth:!1,pageLength:5,keys:!0,select:{style:"single"},columnDefs:[{targets:[0],visible:"true"===config.default.data[a].columns[0].visible?!0:!1},{targets:[1],visible:"true"===config.default.data[a].columns[1].visible?!0:!1},{targets:[2],visible:"true"===config.default.data[a].columns[2].visible?!0:
!1},{targets:[3],visible:"true"===config.default.data[a].columns[3].visible?!0:!1},{targets:[4],visible:"true"===config.default.data[a].columns[4].visible?!0:!1},{targets:[5],visible:"true"===config.default.data[a].columns[5].visible?!0:!1},{targets:[6],visible:"true"===config.default.data[a].columns[6].visible?!0:!1},{targets:[7],visible:"true"===config.default.data[a].columns[7].visible?!0:!1},{targets:[8],readonly:!1,visible:"true"===config.default.data[a].columns[8].visible?!0:!1,render:function(a,
b,c){return"0"===a?'\x3clabel class\x3d"checkbox-inactive"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true"\x3e\x3c/label\x3e':'\x3clabel class\x3d"checkbox-active"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true" checked\x3e\x3c/label\x3e'}},{targets:[9],visible:"true"===config.default.data[a].columns[9].visible?!0:!1},{targets:[10],visible:"true"===config.default.data[a].columns[10].visible?!0:!1},{targets:[11],visible:"true"===config.default.data[a].columns[11].visible?!0:!1},{targets:[12],
visible:"true"===config.default.data[a].columns[12].visible?!0:!1},{targets:[13],visible:"true"===config.default.data[a].columns[13].visible?!0:!1},{targets:[14],visible:"true"===config.default.data[a].columns[14].visible?!0:!1,render:function(a,b,c){return"0"===a?'\x3clabel class\x3d"checkbox-inactive"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true"\x3e\x3c/label\x3e':'\x3clabel class\x3d"checkbox-active"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true" checked\x3e\x3c/label\x3e'}},{targets:[15],
visible:"true"===config.default.data[a].columns[15].visible?!0:!1},{targets:[16],visible:"true"===config.default.data[a].columns[16].visible?!0:!1},{targets:[17],visible:"true"===config.default.data[a].columns[17].visible?!0:!1},{targets:[18],visible:"true"===config.default.data[a].columns[18].visible?!0:!1},{targets:[19],visible:"true"===config.default.data[a].columns[19].visible?!0:!1},{targets:[20],visible:"true"===config.default.data[a].columns[20].visible?!0:!1},{targets:[21],visible:"true"===
config.default.data[a].columns[21].visible?!0:!1},{targets:[22],visible:"true"===config.default.data[a].columns[22].visible?!0:!1,render:function(a,b,c){return"0"===a?'\x3clabel class\x3d"checkbox-inactive"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true"\x3e\x3c/label\x3e':'\x3clabel class\x3d"checkbox-active"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true" checked\x3e\x3c/label\x3e'}},{targets:[23],visible:"true"===config.default.data[a].columns[23].visible?!0:!1,render:function(a,b,c){return"0"===
a?'\x3clabel class\x3d"checkbox-inactive"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true"\x3e\x3c/label\x3e':'\x3clabel class\x3d"checkbox-active"\x3e \x3cinput type\x3d"checkbox" disabled\x3d"true" checked\x3e\x3c/label\x3e'}},{targets:[24],visible:"true"===config.default.data[a].columns[24].visible?!0:!1},{targets:[25],visible:"true"===config.default.data[a].columns[25].visible?!0:!1},{targets:[26],visible:"true"===config.default.data[a].columns[26].visible?!0:!1},{targets:[27],visible:"true"===
config.default.data[a].columns[27].visible?!0:!1},{targets:[28],visible:"true"===config.default.data[a].columns[28].visible?!0:!1},{targets:[29],visible:"true"===config.default.data[a].columns[29].visible?!0:!1},{targets:[30],visible:"true"===config.default.data[a].columns[30].visible?!0:!1},{targets:[31],visible:"true"===config.default.data[a].columns[31].visible?!0:!1},{targets:[32],visible:"true"===config.default.data[a].columns[32].visible?!0:!1},{targets:[33],visible:"true"===config.default.data[a].columns[33].visible?
!0:!1},{targets:[34],visible:"true"===config.default.data[a].columns[34].visible?!0:!1},{targets:[35],visible:"true"===config.default.data[a].columns[35].visible?!0:!1},{targets:[36],visible:"true"===config.default.data[a].columns[36].visible?!0:!1},{targets:[37],visible:"true"===config.default.data[a].columns[37].visible?!0:!1},{targets:[38],visible:"true"===config.default.data[a].columns[38].visible?!0:!1},{targets:[39],visible:"true"===config.default.data[a].columns[39].visible?!0:!1},{targets:[40],
visible:"true"===config.default.data[a].columns[40].visible?!0:!1},{targets:[41],visible:"true"===config.default.data[a].columns[41].visible?!0:!1},{targets:[42],visible:"true"===config.default.data[a].columns[42].visible?!0:!1},{targets:[43],visible:"true"===config.default.data[a].columns[43].visible?!0:!1},{targets:[44],visible:"true"===config.default.data[a].columns[44].visible?!0:!1},{targets:[45],visible:"true"===config.default.data[a].columns[45].visible?!0:!1},{targets:[46],visible:"true"===
config.default.data[a].columns[46].visible?!0:!1},{targets:[47],visible:"true"===config.default.data[a].columns[47].visible?!0:!1},{targets:[48],visible:"true"===config.default.data[a].columns[48].visible?!0:!1},{targets:[49],visible:"true"===config.default.data[a].columns[49].visible?!0:!1},{targets:[50],visible:"true"===config.default.data[a].columns[50].visible?!0:!1},{targets:[51],visible:"true"===config.default.data[a].columns[51].visible?!0:!1},{targets:[52],visible:"true"===config.default.data[a].columns[52].visible?
!0:!1},{targets:[53],visible:"true"===config.default.data[a].columns[53].visible?!0:!1},{targets:[54],visible:"true"===config.default.data[a].columns[54].visible?!0:!1},{targets:[55],visible:"true"===config.default.data[a].columns[55].visible?!0:!1}]}));$("#table_bsueb tbody").on("click","tr",function(){UTIL.logger(dialogname+": onclick() auf tablerow: table: #"+config.default.data.table1.name+"; row index: "+e.row(this).index());clicktime=Date.now();0===c?c=clicktime:b=200>=clicktime-c?!0:!1;c=clicktime;
$(this).hasClass("selected")?b||($(this).removeClass("selected"),action="deselect"):(e.$("tr.selected").removeClass("selected"),$(this).addClass("selected"),action="select");selectedrow=e.row(this).data()[0];UTIL.logger(dialogname+": onclick() auf tablerow action: "+action+"; doubleclick:"+b+"; data: "+e.row(this).data()[0]);var a=e.row(this).data();rowclickaction(action,b,a)});k=!0};detail=function(a){var c=localStorage.getItem(a)?!0:!1;UTIL.logger(dialogname+": detail(): dialog: "+a+" eingetragen: "+
c);c&&localStorage.removeItem(a);localStorage.setItem(a,"folge")};aktualisieren=function(){showtable("table1")};speicherncust=function(a){let c="none";$(".custinput").each(function(a,d){let b=d.id;0<=b.indexOf("cust")&&(b=b.substring(0,b.indexOf("cust")));d.checked?(c="",config.default.data.inputfelder[a].visible="true"):(c="none",config.default.data.inputfelder[a].visible="false");$("#"+b+"lbl").css("display",c);$("#"+b).css("display",c)});localStorage.setItem(dialogname+".eingabe",JSON.stringify(config.default.data.inputfelder));
c="none";$(".custausgabe").each(function(b,d){c=d.checked?"true":"false";config.default.data[a].columns[b].visible=c});localStorage.setItem(dialogname+".ausgabe",JSON.stringify(config.default.data[a].columns));$("#custom").css("display","none");$("#custom").dialog("close")};resetcust=function(a,c){UTIL.logger(dialogname+": resetcust(): block: "+a+"; param: "+c);"eingabe"===a?$(".custinput").each(function(a,d){a=d.id;0<=a.indexOf("cust")&&("reset"===c?$("#"+a).prop("checked",!0):"clear"===c&&$("#"+
a).prop("checked",!1))}):"ausgabe"===a&&$(".custausgabe").each(function(a,d){a=d.id;"reset"===c?$("#"+a).prop("checked",!0):"clear"===c&&$("#"+a).prop("checked",!1)})}});